<Window x:Class="SubtitleTools.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SubtitleTools.UI"
        xmlns:viewmodels="clr-namespace:SubtitleTools.UI.ViewModels" 
        xmlns:ctrl="clr-namespace:SubtitleTools.UI.Controls"
        xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
        d:DataContext="{d:DesignInstance Type=viewmodels:MainViewModel}"
        mc:Ignorable="d"
        Title="Subtitle Tools" 
        Icon="/icon.ico"
        AllowDrop="True"
        DragOver="Window_DragOver"
        Drop="Window_Drop"
        ResizeMode="CanResizeWithGrip"
        WindowState="Maximized"
        MinHeight="600" MinWidth="900"
        Height="650" Width="950">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />

        <Style x:Key="PlayerButtonStyle" TargetType="{x:Type ButtonBase}">
            <Setter Property="MinWidth" Value="26" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
        </Style>
    </Window.Resources>
    
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Command="ApplicationCommands.New">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource NewFile_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Open…" Command="ApplicationCommands.Open">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource OpenFolder_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Recent Files" x:Name="menuRecentFiles" />
                <Separator />
                <MenuItem Command="ApplicationCommands.Save">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Save_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Save _As…" Command="ApplicationCommands.SaveAs">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource SaveAs_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="_Translation" x:Name="menuTranslation">
                    <MenuItem Header="_New" x:Name="fileTranslationNew" />
                    <MenuItem Header="_Open" x:Name="fileTranslationOpen" InputGestureText="Ctrl+Shift+O" />
                    <MenuItem Header="_Reload" x:Name="fileTranslationReload" InputGestureText="Alt+Shift+R"/>
                    <MenuItem Header="_Save" x:Name="fileTranslationSave" />
                    <MenuItem Header="Save _As" x:Name="fileTranslationSaveAs" />
                    <MenuItem Header="_Close" x:Name="fileTranslationClose" />
                </MenuItem>
                <Separator />
                <MenuItem Header="_Headers" x:Name="fileHeaders" />
                <MenuItem Header="_Properties" x:Name="fileProperties" />
                <Separator />
                <MenuItem Header="_Close" x:Name="fileClose" />
                <Separator />
                <MenuItem Command="ApplicationCommands.Print">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Print_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Print Pre_view…" Command="ApplicationCommands.PrintPreview">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource PrintPreview_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="E_xit" Command="ApplicationCommands.Close" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Command="ApplicationCommands.Undo">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Undo_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="ApplicationCommands.Redo">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Redo_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Command="ApplicationCommands.Cut">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Cut_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="ApplicationCommands.Copy">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Copy_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="ApplicationCommands.Paste">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Paste_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="_Format" x:Name="editFormat">
                    <MenuItem Header="_Bold" InputGestureText="Ctrl+B" x:Name="editFormatBold">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource Bold_16x}"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Italic" InputGestureText="Ctrl+I" x:Name="editFormatItalic">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource Italic_16x}"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Underline" InputGestureText="Ctrl+U" x:Name="editFormatUnderline">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource Underline_16x}"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <Separator />
                <MenuItem Header="_Split Lines" InputGestureText="Ctrl+Shift+M" x:Name="editSplit"/>
                <MenuItem Header="_Merge Lines" InputGestureText="Ctrl+M" x:Name="editMerge"/>
                <Separator />
                <MenuItem Header="_Insert Subtitle" x:Name="editInsertSubtitle">
                    <MenuItem Header="_Before" InputGestureText="Ctrl+Shift+Return" x:Name="editInsertSubtitleBefore" />
                    <MenuItem Header="_After" InputGestureText="Ctrl+Return" x:Name="editInsertSubtitleAfter" />
                    <MenuItem Header="At _Video Position" InputGestureText="Ctrl+Shift+D" x:Name="editInsertSubtitleAtVideoPosition" />
                </MenuItem>
                <MenuItem Header="_Delete Subtitles" Command="ApplicationCommands.Delete">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Cancel_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Command="ApplicationCommands.SelectAll">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Select_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="Pr_eferences" x:Name="editPreferences" />
            </MenuItem>
            <MenuItem Header="_View" x:Name="menuView">
                <MenuItem Header="_Frames" x:Name="viewFrames" />
                <MenuItem Header="_Times" x:Name="viewTimes" />
                <Separator />
                <MenuItem Header="_Line Lengths" x:Name="viewLineLengths" />
                <Separator />
                <MenuItem Header="_Video" x:Name="viewVideo" />
                <MenuItem Header="Video _Subtitles" x:Name="viewVideoSubtitles">
                    <MenuItem Header="_Text" x:Name="viewVideoSubtitlesText" />
                    <MenuItem Header="Translatio_n" x:Name="viewVideoSubtitlesTranslation" />
                </MenuItem>
                <Separator />
                <MenuItem Header="_Toolbar" IsCheckable="True" IsChecked="{Binding ShowToolbar}" />
                <MenuItem Header="St_atusbar" IsCheckable="True" IsChecked="{Binding ShowStatusbar}" />
                <Separator />
                <MenuItem Header="_Settings…" Command="ApplicationCommands.Properties">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource Settings_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Search">
                <MenuItem Header="_Find…" Command="ApplicationCommands.Find" x:Name="searchFind">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource QuickFind_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Find Ne_xt" InputGestureText="F3" x:Name="searchFindNext"/>
                <MenuItem Header="Find Pre_vious" InputGestureText="Shift+F3" x:Name="searchFindPrevious" />
                <Separator />
                <MenuItem Header="_Replace…" Command="ApplicationCommands.Replace" x:Name="searchReplace">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource QuickReplace_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="_Go to…" InputGestureText="Ctrl+G" />
            </MenuItem>
            <MenuItem Header="T_imings" x:Name="menuTimings">
                <MenuItem Header="_Input Frame Rate" x:Name="timingsInputFrameRate">
                    <MenuItem Header="…" />
                </MenuItem>
                <MenuItem Header="_Current Frame Rate" x:Name="timingsCurrentFrameRate">
                    <MenuItem Header="…" />
                </MenuItem>
                <Separator />
                <MenuItem Header="_Synchronize" x:Name="timingsSynchronize" />
                <MenuItem Header="_Adjust" x:Name="timingsAdjust" />
                <MenuItem Header="Sh_ift" x:Name="timingsShift" />
            </MenuItem>
            <MenuItem Header="Vide_o" x:Name="menuVideo">
                <MenuItem Header="_Open" x:Name="videoOpen" />
                <MenuItem Header="_Close" x:Name="videoClose" />
                <Separator />
                <MenuItem Header="_Play / Pause" InputGestureText="F5" x:Name="videoPlayPause" />
                <MenuItem Header="_Loop Selection" InputGestureText="Ctrl+F11" x:Name="videoLoopSelectionPlayback" />
                <MenuItem Header="R_ewind" InputGestureText="F6" x:Name="videoRewind" />
                <MenuItem Header="_Forward" InputGestureText="F7" x:Name="videoForward" />
                <Separator />
                <MenuItem Header="_Seek to…" InputGestureText="Ctrl+T" x:Name="videoSeekTo" />
                <MenuItem Header="Seek _to Selection" InputGestureText="Shift+Ctrl+F4" x:Name="videoSeekToSelection" />
                <MenuItem Header="Select _Nearest Subtitle" InputGestureText="Ctrl+F4" x:Name="videoSelectNearestSubtitle" />
                <MenuItem Header="A_uto Select Subtitle" InputGestureText="Ctrl+F3" x:Name="videoAutoSelectSubtitles" />
                <Separator />
                <MenuItem Header="Set Subtitle St_art" InputGestureText="Ctrl+D" x:Name="videoSetSubtitleStart" />
                <MenuItem Header="Set Subtitle En_d" InputGestureText="Ctrl+E" x:Name="videoSetSubtitleEnd" />
            </MenuItem>
            <MenuItem Header="_Tools">
                <MenuItem Header="_Autocheck Spelling" x:Name="toolsAutocheckSpelling" />
                <MenuItem Header="Set _Languages" x:Name="toolsSetLanguages" />
                <Separator />
                <MenuItem Header="_Clean up" Command="{Binding CleanCommand}" />
                <MenuItem Header="_Replace Text…" Command="{Binding ReplaceTextCommand}" />
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_Keyboard Shortcuts" x:Name="helpKeyboardShortcuts" />
                <Separator />
                <MenuItem Header="_Donate" x:Name="helpDonate" />
                <Separator />
                <MenuItem Header="Request a New _Feature" x:Name="helpRequestFeature" />
                <MenuItem Header="Report a _Bug" x:Name="helpReportBug" />
                <Separator />
                <MenuItem Header="_About" Command="ApplicationCommands.Help">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource StatusHelp_16x}"/>
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
        </Menu>

        <ToolBarTray DockPanel.Dock="Top" IsLocked="True" Visibility="{Binding ShowToolbar, Converter={StaticResource booleanToVisibilityConverter}}">
            <ToolBar>
                <Button Command="ApplicationCommands.New" ToolTip="New File">
                    <Image Source="{StaticResource NewFile_16x}" />
                </Button>
                <Button Command="ApplicationCommands.Open" ToolTip="Open File">
                    <Image Source="{StaticResource OpenFolder_16x}" />
                </Button>
                <Button Command="ApplicationCommands.Save" ToolTip="Save File">
                    <Image Source="{StaticResource Save_16x}" />
                </Button>
                <Button Command="ApplicationCommands.Print" ToolTip="Print">
                    <Image Source="{StaticResource Print_16x}" />
                </Button>
                <Separator />
                <Button Command="ApplicationCommands.Cut" ToolTip="Cut">
                    <Image Source="{StaticResource Cut_16x}" />
                </Button>
                <Button Command="ApplicationCommands.Copy" ToolTip="Copy">
                    <Image Source="{StaticResource Copy_16x}" />
                </Button>
                <Button Command="ApplicationCommands.Paste" ToolTip="Paste">
                    <Image Source="{StaticResource Paste_16x}" />
                </Button>
                <Separator />
                <Button Command="ApplicationCommands.Help" ToolTip="About">
                    <Image Source="{StaticResource StatusHelp_16x}" />
                </Button>
            </ToolBar>
        </ToolBarTray>

        <StatusBar DockPanel.Dock="Bottom" Padding="6,0,6,0" Visibility="{Binding ShowStatusbar, Converter={StaticResource booleanToVisibilityConverter}}">
            <StatusBarItem Width="100" HorizontalAlignment="Left" BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" BorderThickness="0,0,0.5,0">
                <TextBlock x:Name="statusMessage" Text="Ready" />
            </StatusBarItem>
        </StatusBar>

        <ctrl:BusyIndicator IsBusy="{Binding IsProcessing}">
            <Grid Margin="4,0,4,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition MinWidth="500"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition MinWidth="350"/>
                </Grid.ColumnDefinitions>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition MinHeight="300"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition MinHeight="100" Height="100"/>
                    </Grid.RowDefinitions>
                    <ctrl:ListBoxEx x:Name="listSubtitle" ItemsSource="{Binding ItemsSource}" ItemTemplate="{StaticResource DialogueListItemTemplate}"
                                    SelectionMode="Extended" HorizontalContentAlignment="Stretch" SelectedIndex="{Binding EditDialogIndex}"/>
                    <GridSplitter Grid.Row="1" Height="4" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Center" Background="Transparent" />
                    <ctrl:DialogueEdit Grid.Row="2" DataContext="{Binding EditingDialog}"/>
                </Grid>
                <GridSplitter Grid.Column="1" Height="Auto" Width="4" HorizontalAlignment="Center" Background="Transparent" />

                <Grid Grid.Column="2">
                    <Grid.RowDefinitions>
                        <RowDefinition MinHeight="280"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    
                    <Grid Background="Black">
                        <vlc:VideoView x:Name="vlcPlayer" Visibility="Hidden">
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="8" Background="Transparent">
                                <TextBlock Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}">No video</TextBlock>
                            </StackPanel>
                        </vlc:VideoView>
                    </Grid>

                    <Border Grid.Row="1" BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" BorderThickness="1,0,1,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto" MinWidth="40"/>
                            </Grid.ColumnDefinitions>
                            <ToggleButton Margin="4,2,2,2" ToolTip="Play / Pause" Style="{StaticResource PlayerButtonStyle}">
                                <Image Width="24" Height="24">
                                    <Image.Style>
                                        <Style TargetType="{x:Type Image}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ToggleButton}}, Path=IsChecked}" Value="False">
                                                    <Setter Property="Source" Value="{StaticResource Play_16x}" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ToggleButton}}, Path=IsChecked}" Value="True">
                                                    <Setter Property="Source" Value="{StaticResource Pause_16x}" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </ToggleButton>
                            <Button Grid.Column="1" Margin="4,2,2,2" Style="{StaticResource PlayerButtonStyle}">
                                <Image Width="20" Height="20" Source="{StaticResource Rewind_16x}" />
                            </Button>
                            <Button Grid.Column="2" Margin="4,2,2,2" Style="{StaticResource PlayerButtonStyle}">
                                <Image Width="20" Height="20" Source="{StaticResource FastForward_16x}" />
                            </Button>
                            <Slider x:Name="playerslider" Grid.Column="3" Margin="4,4,2,2" Height="18" SmallChange="1" Style="{StaticResource PlayerSliderStyle}" VerticalContentAlignment="Center"/>
                            <TextBlock Text="0:00" Grid.Column="4" Margin="4,6,8,2" HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>

                    <Border Grid.Row="2" BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" BorderThickness="1,0,1,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <ToggleButton Margin="4,2,2,2" Style="{StaticResource PlayerButtonStyle}" ToolTip="Select Dialog when play">
                                <Image Width="22" Height="22" Source="{StaticResource PlayMessage_16x}" />
                            </ToggleButton>

                            <Button Grid.Column="1" Margin="4,2,2,2" Style="{StaticResource PlayerButtonStyle}" ToolTip="Mark Start">
                                <Image Width="22" Height="22" Source="{StaticResource MarkStart_16x}" />
                            </Button>
                            <Button Grid.Column="2" Margin="4,2,2,2" Style="{StaticResource PlayerButtonStyle}" ToolTip="Mark End">
                                <Image Width="22" Height="22" Source="{StaticResource MarkEnd_16x}" />
                            </Button>
                            <Button Grid.Column="3" Margin="4,2,2,2" Style="{StaticResource PlayerButtonStyle}">
                                <Image Width="22" Height="22" Source="{StaticResource ArtboardSplit_16x}" />
                            </Button>

                            <TextBlock Grid.Column="4" Text="Start :" FontWeight="SemiBold" Margin="8,2,4,2" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="5" Text="00:00:00.000" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="6" Text="End :" FontWeight="SemiBold" Margin="8,2,4,2" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="7" Text="00:00:00.000" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <TabControl Grid.Row="3" Margin="0,4,0,0">
                        <TabItem Header="Preview">
                            <ctrl:InlinesTextBlock x:Name="testText" Width="Auto" Height="30" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,40" FontSize="16" />
                        </TabItem>
                        
                        <TabItem Header="Shift Timings">
                            <Frame Source="../Pages/ShiftTimingsPage.xaml" />
                        </TabItem>

                        <TabItem Header="Adjust Timings">
                            <Frame Source="../Pages/AdjustTimingsPage.xaml" />
                        </TabItem>

                        <TabItem Header="Synchronize Timings">
                            <Frame Source="../Pages/SynchronizeTimingsPage.xaml" />
                        </TabItem>
                    </TabControl>
                </Grid>
            </Grid>
        </ctrl:BusyIndicator>
        
    </DockPanel>
</Window>
